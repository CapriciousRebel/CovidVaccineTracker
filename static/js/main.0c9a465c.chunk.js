(this.webpackJsonpcovidvaccinetracker=this.webpackJsonpcovidvaccinetracker||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(11),r=n.n(s),i=(n(82),n(71)),l=n(12),o=(n(83),n(142)),j=n(143),d=n(144),b=n.p+"static/media/logo192.5c9b380d.png",u=function(){var e=new Date;return String(e.getDate()).padStart(2,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+e.getFullYear()};var p=function(e){var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)},h=n(55),m=n.n(h),f=n(2),x=function(){return Object(f.jsx)(o.a,{fluid:!0,style:{backgroundColor:"#0CB8CF"},className:"h-10 m-0",children:Object(f.jsxs)(j.a,{className:"d-flex align-items-center  h-100",children:[Object(f.jsx)(d.a,{xs:3,lg:1,className:"d-flex flex-row align-items-center justify-content-center",children:Object(f.jsx)("img",{alt:"Covid Vaccine Tracker",src:b,height:"40",width:"40",className:"d-inline-block align-top"})}),Object(f.jsx)(d.a,{xs:9,lg:9,children:Object(f.jsx)("h2",{children:"Covid Vaccine Tracker"})}),Object(f.jsx)(d.a,{className:"d-flex justify-content-start d-none d-sm-block d-sm-none d-md-block d-md-none d-lg-block",xs:0,children:Object(f.jsxs)("span",{onClick:function(){p("https://github.com/CapriciousRebel/CovidVaccineTracker")},children:["Source Code ",Object(f.jsx)(m.a,{fontSize:"small"})]})})]})})},O=n(22),y=n(69),g=n.n(y),v=n(68),C=n.n(v),w=n(72),N=n(150),k=function(e){return Object(f.jsxs)(d.a,{className:"w-10rem p-3 m-0 d-flex flex-column align-items-center ",children:[Object(f.jsx)(N.a,{checked:e.type[e.name],onChange:function(t){var n=Object(w.a)({},e.type);n[t.target.name]=t.target.checked,e.setType(n)},name:e.name,color:"primary",size:"medium"}),Object(f.jsx)("p",{className:"w-10rem p-0 m-0 text-center font-weight-bold",children:e.name})]})},T=function(e){return Object(f.jsx)(o.a,{fluid:!0,children:Object(f.jsxs)(j.a,{className:"border-bottom border-top mx-3",children:[Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"Covaxin"}),Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"Covishield"}),Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"Free"}),Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"Paid"}),Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"18+"}),Object(f.jsx)(k,{type:e.type,setType:e.setType,name:"45+"})]})})},S=function(e){var t=Object(c.useState)(!1),n=Object(O.a)(t,2),a=n[0],s=n[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(o.a,{className:a?"d-flex align-items-center justify-content-center":"d-flex align-items-center justify-content-center border-bottom",onClick:function(){s(!a)},children:[Object(f.jsx)("h5",{className:"m-0",children:"Filters"}),a?Object(f.jsx)(C.a,{fontSize:"large"}):Object(f.jsx)(g.a,{fontSize:"large"})]}),a?Object(f.jsx)(T,{type:e.filterType,setType:e.setFilterType}):null]})},F=n(29),E=n.n(F),_=n(43),z=n(151),D=n(148),I=n(149),A=n(70),B=n.n(A),M=function(){var e=Object(_.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(t,"&date=").concat(u()),e.abrupt("return",B.a.get(n,{}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){var t=Object(c.useState)(""),n=Object(O.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(O.a)(r,2),l=i[0],b=i[1],u=Object(c.useState)(null),p=Object(O.a)(u,2),h=p[0],m=p[1],x=function(){var t=Object(_.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("requesting: ",a),M(a).then((function(t){0!==(t=t.data.centers).length?e.setFetchedCenters(t):e.setFetchedCenters(null)})).catch((function(t){console.log("Error while fetching data for pincode: ",t),e.setFetchedCenters(null)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(_.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setSubmitOnce(!0),b(a),x(),h&&clearInterval(h),m(setInterval(x,5e3));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)(o.a,{className:"d-flex flex-column align-items-center ",children:[Object(f.jsxs)(d.a,{className:"w-15rem pt-5",children:[Object(f.jsx)(j.a,{children:Object(f.jsx)(I.a,{id:"standard-basic",label:"Enter an Indian pincode...",onChange:function(e){return function(e){s(e.target.value)}(e)},onKeyDown:function(e){"Enter"===e.key&&y()}})}),Object(f.jsx)(j.a,{className:"mt-5 w-10rem",children:Object(f.jsx)(z.a,{variant:"primary",type:"submit",onClick:y,className:" align-self-center",children:"Submit"})})]}),e.submitOnce&&a?Object(f.jsxs)(j.a,{className:"d-flex align-items-start my-5 py-2 border-top border-bottom",children:[Object(f.jsx)(d.a,{xs:1,children:Object(f.jsx)(D.a,{size:"sm",animation:"grow"})}),Object(f.jsx)(d.a,{children:Object(f.jsxs)("p",{className:"m-0",children:["Tracking for pincode: ",l]})})]}):null]})},R=function(e){return Object(f.jsxs)(j.a,{className:"border-bottom",onClick:function(){return p("https://www.cowin.gov.in/home")},children:[Object(f.jsx)(d.a,{xs:6,className:"border-right",children:e.name}),Object(f.jsx)(d.a,{children:e.available_capacity}),Object(f.jsx)(d.a,{children:e.date})]})},V=function(e){var t=function(){var t=[];return e.fetchedCenters.forEach((function(n){n.sessions.forEach((function(c){var a,s,r;0!==c.available_capacity&&(r=n.fee_type,e.filterType[r]&&(s=c.vaccine,e.filterType[s.charAt(0)+s.substring(1).toLowerCase()])&&(a=c.min_age_limit,e.filterType[a+"+"])&&t.push({name:n.name,available_capacity:c.available_capacity,date:c.date.split("-")[0]+"/"+c.date.split("-")[1]}))}))})),t};return Object(c.useEffect)((function(){console.log("centers mounted")})),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(j.a,{className:"border-bottom",children:[Object(f.jsx)(d.a,{xs:6,children:Object(f.jsx)("p",{className:"font-weight-bold",children:"Name"})}),Object(f.jsx)(d.a,{children:"Capacity"}),Object(f.jsx)(d.a,{children:"Date"})]}),e.fetchedCenters&&0!==t().length?t().map((function(e,t){return Object(f.jsx)(R,{name:e.name,available_capacity:e.available_capacity,date:e.date},t)})):Object(f.jsx)("h3",{className:"m-0",children:"No slots available right now satisfying the requirements, you'll be notified when slots are found..."})]})},q={backgroundColor:"#F8F8F8",borderTop:"1px solid #E7E7E7",textAlign:"center",padding:"20px",position:"fixed",left:"0",bottom:"0",height:"60px",width:"100%"},J={display:"block",padding:"20px",height:"60px",width:"100%"},K=function(e){var t=e.children;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{style:J}),Object(f.jsx)("div",{style:q,children:t})]})},L=function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(O.a)(s,2),i=r[0],l=r[1],b=Object(c.useState)(!1),u=Object(O.a)(b,2),h=u[0],m=u[1],x=Object(c.useState)({Covishield:!0,Covaxin:!0,Free:!0,Paid:!0,"18+":!0,"45+":!0}),y=Object(O.a)(x,2),g=y[0],v=y[1];return Object(c.useEffect)((function(){console.log("fetchedCenters: ",n)}),[n]),Object(c.useEffect)((function(){console.log("availableSessions: ",i)}),[i]),Object(f.jsxs)(o.a,{fluid:!0,children:[Object(f.jsx)(S,{filterType:g,setFilterType:v}),Object(f.jsx)(P,{fetchedCenters:n,setFetchedCenters:a,submitOnce:h,setSubmitOnce:m}),h?Object(f.jsx)(V,{fetchedCenters:n,filterType:g,availableSessions:i,setAvailableSessions:l}):null,Object(f.jsx)(K,{children:Object(f.jsx)(j.a,{children:Object(f.jsxs)(d.a,{className:"d-flex justify-content-center",children:["Made with \u2764\ufe0f by ",Object(f.jsx)("pre",{children:" "}),Object(f.jsx)("span",{onClick:function(){p("https://github.com/CapriciousRebel")},className:"mr-5",children:"CapriciousRebel"})]})})})]})};var Y=function(){return Object(f.jsx)(i.a,{children:Object(f.jsxs)(o.a,{fluid:!0,className:"m-0 p-0",children:[Object(f.jsx)("div",{className:"h-10",children:Object(f.jsx)(x,{})}),Object(f.jsx)("div",{className:"h-90",children:Object(f.jsx)(l.a,{exact:!0,path:"/",component:L})})]})})};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(Y,{})}),document.getElementById("root"))},82:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.0c9a465c.chunk.js.map